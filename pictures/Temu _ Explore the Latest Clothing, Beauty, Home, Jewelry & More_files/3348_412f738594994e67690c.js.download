(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3348],{56479:function(t,e,n){"use strict";n.r(e),n.d(e,{ComponentContext:function(){return z},ComponentProvider:function(){return K},createComponentStore:function(){return Q},useComponentStore:function(){return W}});n(34769),n(34115),n(68625),n(62775),n(76555),n(95094),n(88233),n(27233),n(28673),n(21850),n(634),n(20796),n(15735),n(6886);var r=n(45421),o=n.n(r),i=n(44090),c=n.n(i),l=n(69834),s=n.n(l),u=n(77797),a=n.n(u),f=(n(77950),n(94908),n(18178),n(58188),n(34715),n(26464),n(19570),n(1939),n(43105),n(36728),n(43450),n(64925),n(54819),n(74660),n(32501),n(39529),n(31235),n(71372),n(72147),n(6710),n(95342),n(9e4),n(18339),n(74083),n(35079)),d=n.n(f),p=n(3875),v=n(70342),m=n(65659),y=n(50420),h=n(77762),g=n(8377),I=n(35548),_=n(69033),O=n(19126),P=n(89501),b=n(5824),x=n(67437),L=n(67235),w=n(8353),T=n(51377),R=(n(92215),n(61229),n(91732)),j=n.n(R),D=n(35023),S=n.n(D),k=n(88985),E=n.n(k),A=n(55021),C=n.n(A),G=n(42380),B=n.n(G);function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=B()(t);if(e){var o=B()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C()(this,n)}}var U=function(t){E()(n,t);var e=F(n);function n(){return S()(this,n),e.apply(this,arguments)}return j()(n)}(L.Y),q=n(11336),M=["filters","viewMore"];function N(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw i}}}}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var H=(0,w.fz)((function(t){var e={nodeCommon:{},context:{},$service:{},goodsList:[],recommendGoodsList:[],offset:0,hasMore:!0,status:T.sB.EMPTY,limit:20,isShowViewMore:!1,isShowPolicy:!1,filterList:[],selectedFilter:[],isFilterDataLoaded:!1,hoverObj:{text:"",x:-100,y:0},categoryList:[],optId:"",vrParams:{cmmDsId:"",secOptId:"",title:"",recPoolId:""},listId:(0,v.x)(),isVrDs:!1,activityName:"",disableItemList:[],linkUrl:"",hasFirstReqLoaded:!1};return(0,P.M)()((0,m.n)((function(n,r){return $($($({},e),t),{},{setHoverText:function(t,e,r){n((function(n){n.hoverObj={text:t,x:e,y:r}}))},setIsVrDs:function(t){n((function(e){e.isVrDs=t}))},setGoodsList:function(t){n((function(e){e.goodsList=t}))},initService:function(){n((function(t){t.$service=new U(r().context.$axiosHttp)}))},getInitialProps:(u=s()(d().mark((function t(e){var o,i,c,l,s,u,a,f,v,m,y;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.isServer,i=r(),c=i.initService,l=i.nodeCommon.props,s=i.goodsList,u=i.queryGoodsList,a=i.setVrParams,f=i.setIsVrDs,i.__innerGlobalStore,c(),(v=l.dsId)!==L.y.VR002&&v!==L.y.VR001||(f(!0),a()),null!=s&&s.length){t.next=8;break}return t.next=8,u(o);case 8:n((function(t){t.hasFirstReqLoaded=!0})),m=r(),y=m.status,o||y!==T.sB.FAILED||l.goodsEmpty!==T.mY.GO_DEFAULT||(0,p.r1)({errorType:p.RN.GOODS_EMPTY});case 11:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)}),setVrParams:function(){var t,e,o,i=((null!==(t=null===(e=r())||void 0===e||null===(o=e.__innerGlobalStore)||void 0===o?void 0:o.getState())&&void 0!==t?t:{}).sysInfo||{}).query;n((function(t){t.vrParams={cmmDsId:null==i?void 0:i.cmm_ds_id,secOptId:null==i?void 0:i.sec_opt_id,title:null==i?void 0:i.view_all_title,recPoolId:null==i?void 0:i.pool_id}}))},queryGoodsList:(l=s()(d().mark((function t(e){var i,l,s,u,a,f,p,v,m,I,P,L,w,R,j,D,S,k,E,A,C,G,B,F,U,V,Y,H,z,K,W,Q,Z,J,X,tt,et,nt,rt,ot,it,ct,lt,st,ut,at,ft,dt,pt,vt,mt,yt,ht,gt,It,_t,Ot,Pt;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l=r(),s=l.offset,u=l.status,a=l.nodeCommon,f=a.props,p=a.customName,v=a.pageBase,m=a.sysInfo,I=l.$service,P=l.context,L=l.vrParams,w=l.listId,R=l.isVrDs,j=f.limit,D=void 0===j?T.UZ:j,S=f.dsId,k=f.card,E=f.type,A=f.optRecType,C=f.activityName,G=f.poolId,B=f.skipPageTitle,F=f.manualTopGoods,U=(null===(i=(0,y.hb)(P))||void 0===i?void 0:i.leoProxyInfo)||{},V=null!=U&&U.tmpl?(0,_.ru)($({},U),"https://www.temu.com/kuiper/".concat(null==U?void 0:U.tmpl,".html")):"",Y=V?{penetrateParams:{tt_referer:V}}:{},u!==T.sB.PENDING){t.next=8;break}return t.abrupt("return");case 8:return H=$({dsId:S,offset:s,limit:D,listId:w,goodsCardItemType:null==k?void 0:k.cardType,recPoolId:G,manualTopGoods:F,goodsPoolParam:G?{poolId:G,title:B||"",cmmDsId:S}:B?{title:B}:void 0},Y),C&&(H.activityName=C),R&&(H=$($({},H),{},{dsId:null==L?void 0:L.cmmDsId,secOptId:null==L?void 0:L.secOptId,recPoolId:null==L?void 0:L.recPoolId})),E===T.oY.TAB_NEW&&(H.optRecType=A,H.useCondition=!1,H.needCategoryRec=!0,K=h.jU?window.location.search:null==P||null===(z=P.__req)||void 0===z?void 0:z.originalUrl,W=(0,O.parse)(K,{ignoreQueryPrefix:!0}),H.optId=W.optId||"",H.optType=W.optType||"",n((function(t){t.optId=W.optId||""}))),T.oY.FILTER===E&&(H.useCondition=!0,H.needCategoryRec=E===T.oY.FILTER,X=h.jU?null===(Q=window)||void 0===Q||null===(Z=Q.location)||void 0===Z?void 0:Z.search:null==P||null===(J=P.__req)||void 0===J?void 0:J.originalUrl,tt=(0,O.parse)(X,{ignoreQueryPrefix:!0}),H.filterItems=tt.filterItems||"",H.optId=tt.optId||"",H.optType=tt.optType||"",et=tt.activity_name||"",n((function(t){t.optId=tt.optId||"",t.activityName=et}))),n((function(t){t.status=T.sB.PENDING})),t.next=16,I.fetchGoodsList(H);case 16:nt=t.sent,rt=nt.kpDsItemList,ot=nt.filterRegion,it=nt.categoryRecResult,ct=nt.hasMore,lt=nt.message,nt.subTabList,st=nt.linkUrl,ut=nt.disableItemList,at=N(rt||[]);try{for(at.s();!(ft=at.n()).done;)if(null!=(dt=ft.value)&&dt.commonRecGoods){mt=null==P||null===(pt=P.__req)||void 0===pt||null===(vt=pt.app)||void 0===vt?void 0:vt.logger,yt=dt.commonRecGoods.priceInfo,gt=(ht=void 0===yt?{}:yt).marketPriceText,It=ht.reductionText,_t=!Array.isArray(gt),Ot=!Array.isArray(It),Pt="{}";try{Pt=JSON.stringify({market_price_text:void 0===gt?"undefined":gt,reduction_text:void 0===It?"undefined":It})}catch(t){Pt="{}"}e&&(_t||Ot)?null==mt||mt.info("ds_market_or_reduction_price_text_is_not_array",{logValue:Pt,req:null==P?void 0:P.__req}):h.jU&&(_t||Ot)&&(0,q.A)("ds_market_or_reduction_price_text_is_not_array",{customTags:{data:Pt}})}}catch(t){at.e(t)}finally{at.f()}if(it&&n((function(t){t.categoryList=[{optName:"Recommended",optId:"",optType:""}].concat((null==it?void 0:it.optList)||[])})),ot&&n((function(t){var e,n,r,o;t.isFilterDataLoaded=!0;var i=[];null==ot||null===(e=ot.rankSorter)||void 0===e||null===(n=e.filters)||void 0===n||n.forEach((function(t){Object.assign(t,{isSection:!0}),null!=t&&t.selected&&i.push(t)})),t.selectedFilter=i.concat(ot.selectedFilter);var l=null!==(r=null==ot||null===(o=ot.innerFilter)||void 0===o?void 0:o.filterList)&&void 0!==r?r:[];t.filterList=l.map((function(t){var e=t.filters,n=void 0===e?[]:e,r=t.viewMore,o=c()(t,M),i=n.map((function(t){return t.selected})).lastIndexOf(1)+1,l=Math.ceil(Math.max(.1,i)/r);return $($({},o),{},{viewMore:r,filters:n.slice(0,l*r),$filters:n.slice(l*r)})}))})),!(null!=rt&&rt.length||[T.oY.FILTER].includes(E))){t.next=33;break}n((function(t){t.disableItemList=ut||[],t.goodsList=[].concat(o()(0==s?[]:t.goodsList),o()((0,x.yq)(rt,{cardTrackingInfo:{card_type:b.mq.CARD_DEFAULT,custom_name:p},pageBase:v,sysInfo:m}))),t.offset+=D;var e=t.nodeCommon.props,n=e.limitMode,r=e.type,i=n===T.yx.LIMITED&&r===T.oY.NORMAL;t.hasMore=!i&&ct,st&&(t.linkUrl=st)})),t.next=34;break;case 33:throw new Error(lt||0===s?"first screen goods empty":"queryGoodsList error");case 34:n((function(t){t.status=T.sB.DONE})),t.next=40;break;case 37:t.prev=37,t.t0=t.catch(0),h.jU?(n((function(t){t.hasMore=!1,t.status=T.sB.FAILED})),(0,g.HG)(t.t0)):n((function(t){t.status=T.sB.DONE}));case 40:case"end":return t.stop()}}),t,null,[[0,37]])}))),function(t){return l.apply(this,arguments)}),onFilterItemClick:function(t,e,o){var i=t.filter,c=t.isSection;n((function(t){t.offset=0,t.listId=(0,v.x)();var n=[];t.filterList.forEach((function(t){var r=t.filters,l=t.multi;r.forEach((function(t){t.filter===i?(t.selected=e&&o?1:t.selected?0:1,t.minPrice=e,t.maxPrice=o):(0===l||t.isSection&&c)&&(t.selected=0);var r=t.filter,s=t.minPrice,u=t.maxPrice,a=t.name,f="Z104:"===t.filter&&s&&u;t.selected&&n.push({filter:f?"".concat(r).concat(s,",").concat(u):r,name:a,selected:1})}))})),t.selectedFilter=n}));var l=r().selectedFilter.map((function(t){return t.filter})).join("|");(0,I.qz)({filterItems:l}),r().queryGoodsList()},reset:function(t){var e=r().selectedFilter,o=t?e.filter((function(e){var n=e.filter;return n!==t&&0!==n.indexOf(t)})):[];n((function(t){t.selectedFilter=o,t.offset=0,t.listId=(0,v.x)()}));var i=o.map((function(t){return t.filter})).join("|");(0,I.qz)({filterItems:i}),r().queryGoodsList()},appendFilterList:(i=s()(d().mark((function t(e){var r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.identifier,n((function(t){t.filterList.forEach((function(t){var e=t.identifier,n=t.filters,o=t.$filters,i=t.viewMore;r===e&&(t.filters=n.concat(null==o?void 0:o.slice(0,i)),t.$filters=null==o?void 0:o.slice(i))}))}));case 2:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)})});var i,l,u})))})),z=H.ComponentContext,K=H.ComponentProvider,W=H.useComponentStore,Q=H.createComponentStore},69454:function(t,e,n){"use strict";n.d(e,{Ig:function(){return v},pt:function(){return y},yq:function(){return m}});var r=n(77797),o=n.n(r),i=n(44090),c=n.n(i),l=(n(58188),n(52856),n(26464),n(57610),n(43450),n(64925),n(54819),n(39529),n(44112),n(34769),n(34115),n(95342),n(9e4),n(18339),n(68625),n(36728),n(34715),n(19570),n(1939),n(62775),n(76555),n(95094),n(83910)),s=n(81952),u=n(69033),a=n(6768),f=["pRec","pSearch","ad","mRec","mTrc","linkUrl","seoLinkUrl"];function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t||{},r=n.priceStr,o=n.priceText,i=n.marketPriceText,c=n.reductionText,l=n.appPromotionPriceText,s=n.appPromotionReductionText;return{showPriceStr:(o?o[1]:r)||e,unitPrefix:o?o[0]:"",unitSuffix:o?o[2]:"",showMarketPriceStr:i&&i.length?i.join(""):"",reductionText:c,showAppPromotionPriceText:l&&l.length?l.join(""):"",showPromotionReductionText:s&&s.length?s.join(""):""}},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=function(t){return null==t?void 0:t.some((function(t){var e,n,r,o;return(null==t||null===(e=t.commonRecGoods)||void 0===e||null===(n=e.image)||void 0===n?void 0:n.width)!==(null==t||null===(r=t.commonRecGoods)||void 0===r||null===(o=r.image)||void 0===o?void 0:o.height)}))}(t);return t.map((function(t,r){var o,i,d,v,m,y,h,g,I,_=t.commonRecGoods,O=t.dsItemType,P=t.image,b=_||{},x=b.pRec,L=b.pSearch,w=b.ad,T=b.mRec,R=b.mTrc,j=b.linkUrl,D=b.seoLinkUrl,S=c()(b,f);return{type:l.i.NORMAL_GOODS,index:r,data:p(p({cardTrackingInfo:null!==(o=null==e?void 0:e.cardTrackingInfo)&&void 0!==o?o:{},dsItemType:O,allLongImage:n,themeCard:P,pRec:(0,s.or)(x),pSearch:(0,s.or)(L),ad:(0,s.or)(w),mRec:(0,s.or)(T),mTrc:(0,s.or)(R)},S),{},{linkUrl:(0,a.Y7)((null==e||null===(i=e.sysInfo)||void 0===i?void 0:i.userAgent)||"")&&null!=e&&null!==(d=e.pageBase)&&void 0!==d&&d.tmpl&&["dk3","dk8"].includes(null==e||null===(v=e.pageBase)||void 0===v?void 0:v.tmpl)?(0,u.ru)({r_pid:null==e||null===(m=e.pageBase)||void 0===m?void 0:m.subj,r_idx:r},j):j,seoLinkUrl:(0,a.Y7)((null==e||null===(y=e.sysInfo)||void 0===y?void 0:y.userAgent)||"")&&null!=e&&null!==(h=e.pageBase)&&void 0!==h&&h.tmpl&&["dk3","dk8"].includes(null==e||null===(g=e.pageBase)||void 0===g?void 0:g.tmpl)?(0,u.ru)({r_pid:null==e||null===(I=e.pageBase)||void 0===I?void 0:I.subj,r_idx:r},D):D})}}))},y=function(t){return"string"!=typeof t?t:(t.startsWith("http")||t.startsWith("/")||(t="/"+t),t.split("?")[0])}},67437:function(t,e,n){"use strict";n.d(e,{Ig:function(){return r.Ig},T9:function(){return o.T9},pt:function(){return r.pt},yq:function(){return r.yq}});var r=n(69454),o=n(38636)},67235:function(t,e,n){"use strict";n.d(e,{Y:function(){return y},y:function(){return r}});var r=function(t){return t.G006="g006",t.G008="g008",t.CAT002="cat002",t.G020="g020",t.VR002="vr002",t.VR001="vr001",t.G040="g040",t.SC002="sc002",t.REC001="rec001",t}({}),o=(n(58188),n(92215),n(61229),n(91732)),i=n.n(o),c=n(35023),l=n.n(c),s=n(88985),u=n.n(s),a=n(55021),f=n.n(a),d=n(42380),p=n.n(d),v=(n(18178),n(77043));function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var o=p()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var y=function(t){u()(n,t);var e=m(n);function n(){var t;l()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).fetchGoodsList=function(e){return t.post({url:v.vh.KP_DS,params:e}).then((function(t){return(null==t?void 0:t.result)||{}})).catch((function(t){return t}))},t}return i()(n)}(n(13295).m)},53260:function(){}}]);
//# sourceMappingURL=http://temudebug.com/sourcemaps/assets/js/3348_412f738594994e67690c.js.map