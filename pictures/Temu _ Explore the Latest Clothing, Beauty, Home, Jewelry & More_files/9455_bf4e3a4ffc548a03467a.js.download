(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9455],{69256:function(e,t,n){"use strict";n.d(t,{W1:function(){return i},ZZ:function(){return u}});var r=n(62494),a=n(2340),o=(0,n(87493).Ue)((function(e){return{activeModalNumber:0,mounted:function(){e((function(e){return{activeModalNumber:e.activeModalNumber+1}}))},unMounted:function(){e((function(e){return{activeModalNumber:e.activeModalNumber-1}}))}}})),i=function(e){var t=o((function(e){return e.activeModalNumber>0})),n=(0,r.z)((function(t){t.activeModalNumber>0?null==e||e(!0):null==e||e(!1)}));return(0,a.L)((function(){return o.subscribe(n)}),[n]),t},u=function(){(0,a.L)((function(){return o.getState().mounted(),function(){return o.getState().unMounted()}}),[])}},89455:function(e,t,n){"use strict";n.d(t,{ZP:function(){return G}});var r=n(29684),a=n.n(r),o=n(63987),i=n.n(o),u=(n(36728),n(58188),n(34715),n(26464),n(19570),n(1939),n(54529)),s=n(72779),l=n.n(s),c=n(95449),d=n.n(c),f=n(68129),v=n(91349),y=n(12919),h=n(77762),p=n(70342),m=n(11336),g=n(69834),T=n.n(g),k=n(35079),E=n.n(k),b=(n(34769),n(52856),n(57610),n(49228),n(48166),n(45162),n(87493)),M=(n(34115),n(68625),n(62775),n(76555),n(95094),n(77797)),S=n.n(M),O=n(35023),A=n.n(O),I=n(91732),N=n.n(I),R=(n(43450),n(64925),n(54819),n(39529),n(31235),n(95342),n(9e4),n(18339),n(82488),n(30390),n(9949),function(e){return e.ENTER="enter_pop",e.RETAIN="retain_pop",e}({})),w=function(e){return e.INIT="init",e.READY="ready",e.SHOWING="showing",e.DESTROY="destroy",e.PENDING="pending",e}({}),x=n(57775);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(){function e(){A()(this,e),this.modalTasks=void 0,this.initialized=void 0,this.stashRegisterModalTasks=void 0,this.modalTasks=[],this.initialized=!1,this.stashRegisterModalTasks=[]}var t;return N()(e,[{key:"init",value:function(e){var t,n=this,r=e.modalTasks;this.initialized?console.error("ModalManager has initialized!!!"):Array.isArray(r)&&null!=r&&r.length&&(this.modalTasks=r.map((function(e){return P(P({},e),{},{status:w.INIT,hasShow:!1})})),null===(t=this.stashRegisterModalTasks)||void 0===t||t.forEach((function(e){n.register(e)})),this.initialized=!0)}},{key:"register",value:function(e){var t,n=e||{},r=n.type,a=n.callBack;if(Array.isArray(this.modalTasks)&&null!==(t=this.modalTasks)&&void 0!==t&&t.length){var o=this.modalTasks.find((function(e){return e.type===r}));o&&(null==o?void 0:o.status)===w.INIT&&this.ready({rsType:o.rsType,type:r,callBack:a})}else this.stashRegisterModalTasks.push(e)}},{key:"ready",value:function(e){var t=this.findTargetModalIndex(e.type),n=this.modalTasks[t],r=n&&n.status===w.INIT;return r&&(this.modalTasks[t]=P(P({},n),{},{status:w.READY,callBack:e.callBack})),r}},{key:"unRegister",value:function(e){var t=this.modalTasks.find((function(t){return t.type===e}));t&&(null==t?void 0:t.status)!==w.DESTROY&&(this.changeModalStatusByType(e,w.DESTROY),this.trigger(t.rsType).catch((function(){})))}},{key:"dangerRemove",value:function(e){this.changeModalStatusByType(e,w.DESTROY,!0)}},{key:"dangerRemoveMore",value:function(e){var t=this;e.forEach((function(e){e&&t.changeModalStatusByType(e,w.DESTROY,!0)}))}},{key:"trigger",value:(t=T()(E().mark((function e(t){var n,r,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasShowingModal){e.next=2;break}return e.abrupt("return");case 2:if(!(n=this.modalTasks.find((function(e){return e.rsType===t&&e.status===w.READY&&e.callBack})))||"function"!=typeof n.callBack){e.next=13;break}if(this.changeModalStatusByType(n.type,w.PENDING),!n.delayTime){e.next=8;break}return e.next=8,(0,x._)(n.delayTime);case 8:return e.next=10,n.callBack();case 10:r=e.sent,a=r.success,this.changeModalStatusByType(n.type,a?w.SHOWING:w.DESTROY,a);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.modalTasks=[]}},{key:"hasShowingModal",get:function(){var e;return null===(e=this.modalTasks)||void 0===e?void 0:e.some((function(e){return[(w.SHOWING,w.PENDING)].includes(e.status)}))}},{key:"enterModalAllReady",get:function(){var e,t=null===(e=this.modalTasks)||void 0===e?void 0:e.filter((function(e){return e.rsType===R.ENTER&&e.display}));return(null==t?void 0:t.length)>0&&t.every((function(e){return e.status===w.READY}))}},{key:"changeModalStatusByType",value:function(e,t,n){var r=this.modalTasks.findIndex((function(t){return t.type===e}));if(-1!==r){var a=this.modalTasks[r];this.modalTasks[r]=P(P({},a),{},{status:t,hasShown:void 0!==n?!!n:!!a.hasShown})}}},{key:"findTargetModalIndex",value:function(e){return this.modalTasks.findIndex((function(t){return t.type===e}))}}]),e}(),B=n(99310),_=(0,b.Ue)((function(e,t,n){return{modalManager:void 0,retainManager:(0,y.i5)(),overlayManager:(0,y.i5)(),modalTasks:void 0,hasExecuted:!1,prepareModalData:(r=T()(E().mark((function e(t,n){var r,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,e.next=4,n.post("api/jade/fargo/batch_rs/get",(0,B.lv)(t,[],!0));case 4:(a=e.sent).success&&a.result&&Object.keys(a.result).forEach((function(e){Array.isArray(a.result[e])&&a.result[e].forEach((function(t){r.push({rsType:e,type:t.type,delayTime:t.delayTime,display:t.display})}))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r=[];case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),function(e,t){return r.apply(this,arguments)}),initModalManager:function(e,n,r){if(h.jU){var a=Array.isArray(t().modalTasks)?t().modalTasks:[],o=t().modalManager||new j;t().modalManager=o,null!=a&&a.some((function(e){return e.rsType===R.RETAIN&&e.display}))&&(t().retainManager=n),t().overlayManager||(t().overlayManager=r),o.init({modalTasks:a}),null!=o&&o.enterModalAllReady&&!t().hasExecuted&&t().execute()}},execute:function(){var n=t(),r=n.modalManager,a=n.modalTasks,o=n.retainManager;n.hasExecuted||(e({hasExecuted:!0}),r&&(r.trigger(R.ENTER),o&&null!=a&&a.find((function(e){return e.rsType===R.RETAIN&&e.display}))&&o.push({taskType:"simple",callback:function(){r.trigger(R.RETAIN),console.log("trigger retain....")}})))}};var r})),C=_,L=n(21574),Y=n(69256),Z=n(6768),U=function(){var e=(0,u.useState)(!1),t=i()(e,2),n=t[0],r=t[1];return(0,u.useEffect)((function(){r(!0)}),[]),{mounted:n}},z=function(){return{mounted:!0}},G=function(e){var t,n=(0,L.s6)((function(e){return e.retainManager})),r=(0,u.useRef)(null),o=e||{},s=o.hideNativeCart,c=void 0===s||s,g=o.usePortal,T=void 0===g||g,k=o.enableScrollX,E=void 0!==k&&k,b=o.portalProps,M=void 0===b?{}:b,S=o.isBackToClose,O=void 0!==S&&S,A=o.onBackToClose,I=void 0===A?y.WY:A,N=o.customZIndex,R=o.modalType,w=(null==e?void 0:e.overscrollBehavior)||"contain",x=(0,L.s6)((function(e){var t;return null===(t=e.sysInfo)||void 0===t?void 0:t.isIOSSystem})),D=(0,L.s6)((function(e){var t;return null===(t=e.sysInfo)||void 0===t?void 0:t.userAgent}));if(h.jU){var P=window.innerHeight,j=screen.height,B=(0,Z.Y0)(D);w=(x?P<2*j/3||P===j:j-P<100)&&B===Z.iw.Facebook?"auto":w}var _=null===(t=C.getState())||void 0===t?void 0:t.overlayManager,G=(0,u.useState)((function(){return e.modalId||"modal_id_"+(0,p.x)(10)})),H=i()(G,1)[0],W=(T?U:z)().mounted;(0,Y.ZZ)(),(0,u.useEffect)((function(){var e,t=H;H&&_&&(null==_||null===(e=_.push)||void 0===e||e.call(_,t,{hideNativeCart:c,overscrollBehavior:w}));return function(){var e;null==_||null===(e=_.removeById)||void 0===e||e.call(_,t)}}),[H,_]),(0,u.useEffect)((function(){var e;if(O)return null==n||null===(e=n.push)||void 0===e||e.call(n,I),function(){var e;null==n||null===(e=n.removeByRef)||void 0===e||e.call(n,I)}}),[I,O]),(0,u.useEffect)((function(){if("contain"===w&&r.current&&W){var e=0,t=0,n=function(n){e=n.touches[0].pageY,t=n.touches[0].pageX},a=function(n){var r="";E&&(r=n.touches[0].pageX>t?"right":"left"),(0,f.fY)(n,n.touches[0].pageY>e?"up":"down",r)},o=!!f.e$&&{passive:!1},i=r.current;return i.addEventListener("touchstart",n,o),i.addEventListener("touchmove",a,o),function(){i&&(i.removeEventListener("touchstart",n),i.removeEventListener("touchmove",a))}}}),[w,W]),(0,u.useEffect)((function(){if(W){if(!x)return;if(!r.current||"function"!=typeof r.current.querySelectorAll)return;var e=r.current.querySelectorAll("[data-scroll]");if(!e||"function"!=typeof e.forEach)return;e.forEach((function(e){if(e)try{if(!e.classList.contains(d().bounce))return void e.classList.add(d().bounce)}catch(e){}}))}}),[W]),(0,u.useEffect)((function(){R&&(0,m.A)("kuiper_common_modal_impr",{customTags:{commonModalType:R}})}),[R]);var q=function(){return u.createElement("div",{ref:r,className:l()(d().wrap,e.className),style:e.style,onClick:function(t){t.stopPropagation(),t.target===t.currentTarget&&e.onClick&&e.onClick(t)}},e.children)};return T?u.createElement(v.Z,a()({enablePointEvents:!0,containerId:H,containerZIndex:N||9999},M),q()):q()}},91349:function(e,t,n){"use strict";n(32501),n(72147),n(88233),n(27233),n(28673),n(21850),n(34115),n(634),n(20796),n(15735),n(6886),n(71372);var r=n(63987),a=n.n(r),o=(n(34769),n(95342),n(58188),n(9e4),n(26464),n(18339),n(77950),n(48319),n(36728),n(54529)),i=n(42418),u=n.n(i),s=n(8810),l=n(12919),c=n(77762);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.Z=function(e){var t=e.containerStyle,n=e.containerClassName,r=e.containerAttributes,i=e.enablePointEvents,f=e.disableDefaultClassName,v=e.containerId,y=void 0===v?"bg-simple-portal-container":v,h=e.containerZIndex,p=void 0===h?1003:h,m=e.children,g=e.parentEl,T=(0,o.useRef)([]),k=(0,o.useState)(null),E=a()(k,2),b=E[0],M=E[1];return(0,o.useEffect)((function(){try{var e=document.querySelector("#".concat(y));if(e){for(var a=e.childNodes,o=[],s=0;s<a.length;s+=1)o.push(a.item(s));T.current=o}else{if(e=document.createElement("div"),r)for(var v=0,h=Object.keys(r);v<h.length;v++){var m=h[v];e.setAttribute(m,r[m])}if(t)for(var k=0,E=Object.keys(t);k<E.length;k++){var b=E[k];e.style[b]=t[b]}if(f||e.classList.add(u().portalContainer),i&&e.classList.add(u().portalContainerEnablePointEvents),n){var S,O=d(n.split(/\s/g).filter(l.yR));try{for(O.s();!(S=O.n()).done;){var A=S.value;e.classList.add(A)}}catch(e){O.e(e)}finally{O.f()}}null!=p&&(e.style.zIndex="".concat(p)),y&&(e.id=y);var I=document.body;"function"==typeof g?I=g():"string"==typeof g&&(I=document.querySelector(g)),I?I.appendChild(e):c.yG&&console.error("SimplePortal ".concat(y," parentEl empty"))}return M(e),function(){try{document.body.removeChild(e)}catch(e){}}}catch(e){c.yG&&console.error(e)}}),[]),m&&c.jU&&b?(0,s.createPortal)(m,b):o.createElement(o.Fragment,null)}},95449:function(e){e.exports={wrap:"wrap-1Ot06",bounce:"bounce-3FuQZ"}},42418:function(e){e.exports={portalContainer:"portalContainer-3kURt",portalContainerEnablePointEvents:"portalContainerEnablePointEvents-snzLk"}}}]);
//# sourceMappingURL=http://temudebug.com/sourcemaps/assets/js/9455_bf4e3a4ffc548a03467a.js.map